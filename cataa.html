<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CatGPT</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            overflow: hidden; /* Prevent body scroll */
        }
        /* Custom scrollbar for a more integrated look */
        #chat-container::-webkit-scrollbar {
            width: 6px;
        }
        #chat-container::-webkit-scrollbar-track {
            background: #1f2937; /* bg-gray-800 */
        }
        #chat-container::-webkit-scrollbar-thumb {
            background: #4b5563; /* bg-gray-600 */
            border-radius: 3px;
        }
        .typing-indicator span {
            height: 8px;
            width: 8px;
            background-color: #9ca3af; /* bg-gray-400 */
            border-radius: 50%;
            display: inline-block;
            animation: bounce 1.4s infinite ease-in-out both;
        }
        .typing-indicator span:nth-child(1) {
            animation-delay: -0.32s;
        }
        .typing-indicator span:nth-child(2) {
            animation-delay: -0.16s;
        }
        @keyframes bounce {
            0%, 80%, 100% {
                transform: scale(0);
            }
            40% {
                transform: scale(1.0);
            }
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200 flex flex-col h-full">

    <!-- Header -->
    <header class="bg-gray-900/50 backdrop-blur-sm border-b border-gray-700 p-4">
        <h1 class="text-xl font-bold text-center text-white">CatGPT</h1>
    </header>

    <!-- Chat Container -->
    <main id="chat-container" class="flex-1 overflow-y-auto p-4 md:p-6 space-y-6">
        <!-- Messages will be injected here -->
    </main>
    
    <!-- Typing Indicator Template (hidden by default) -->
    <div id="typing-indicator-container" class="hidden px-4 md:px-6 pb-4">
         <div class="max-w-2xl mx-auto flex items-end gap-3">
            <div class="flex-shrink-0">
                <!-- Cat Avatar SVG -->
                <svg class="h-8 w-8 text-white bg-green-600 p-1 rounded-full" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M11.968 2.073c.183 0 .366.003.548.01a8.998 8.998 0 0 1 8.41 8.41c.007.182.01.365.01.548 0 .183-.003.366-.01.548a8.998 8.998 0 0 1-8.41 8.41c-.182.007-.365.01-.548.01-.183 0-.366-.003-.548-.01a8.998 8.998 0 0 1-8.41-8.41c-.007-.182-.01-.365-.01-.548 0-.183.003-.366.01-.548A8.998 8.998 0 0 1 11.42 2.083c.182-.007.365-.01.548-.01Zm0 1.5a7.5 7.5 0 0 0-7.045 7.045c-.006.152-.009.305-.009.458s.003.306.009.458A7.5 7.5 0 0 0 11.968 19.5c.153 0 .306-.003.458-.009A7.5 7.5 0 0 0 19.5 12.42c.006-.152.009-.305.009-.458s-.003-.306-.009-.458A7.5 7.5 0 0 0 12.425 4.455a7.433 7.433 0 0 0-.457-.009ZM8.5 12c.828 0 1.5-.672 1.5-1.5S9.328 9 8.5 9 7 9.672 7 10.5 7.672 12 8.5 12Zm7 0c.828 0 1.5-.672 1.5-1.5S16.328 9 15.5 9s-1.5.672-1.5 1.5.672 1.5 1.5 1.5Zm-3.499 2.25c-.276 0-.5.224-.5.5s.224.5.5.5h.001a.5.5 0 0 0 .499-.5v-.5h-.5Zm0-1.5c.275 0 .5-.225.5-.5v-1c0-.275-.225-.5-.5-.5s-.5.225-.5.5v1c0 .275.225.5.5.5Zm-1 1.5c-.276 0-.5.224-.5.5s.224.5.5.5h.001a.5.5 0 0 0 .499-.5v-.5h-.5Zm2 0c-.276 0-.5.224-.5.5s.224.5.5.5a.5.5 0 0 0 .5-.5c0-.276-.224-.5-.5-.5Z"/></svg>
            </div>
            <div class="bg-gray-700 rounded-lg p-3">
                <div class="typing-indicator">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </div>
    </div>


    <!-- Input Form -->
    <footer class="p-4 bg-gray-900">
        <div class="max-w-2xl mx-auto">
            <form id="chat-form" class="flex items-center gap-2">
                <input type="text" id="user-input" class="w-full bg-gray-800 border border-gray-700 rounded-lg py-2 px-4 text-gray-200 focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="Message CatGPT...">
                <button type="submit" class="bg-gray-800 hover:bg-gray-700 text-gray-400 p-2 rounded-lg disabled:opacity-50" aria-label="Send message">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
                        <path d="M3.478 2.404a.75.75 0 0 0-.926.941l2.432 7.905H13.5a.75.75 0 0 1 0 1.5H4.984l-2.432 7.905a.75.75 0 0 0 .926.94 60.519 60.519 0 0 0 18.445-8.986.75.75 0 0 0 0-1.218A60.517 60.517 0 0 0 3.478 2.404Z" />
                    </svg>
                </button>
            </form>
            <p class="text-xs text-gray-600 text-center mt-2 px-4">CatGPT can meow, purr, and occasionally hiss. It is not a real language model.</p>
        </div>
    </footer>

    <script>
        const chatContainer = document.getElementById('chat-container');
        const chatForm = document.getElementById('chat-form');
        const userInput = document.getElementById('user-input');
        const sendButton = chatForm.querySelector('button');
        const typingIndicatorContainer = document.getElementById('typing-indicator-container');

        const catResponses = [
            'Meow.',
            'Purrrr...',
            'Mrrrp.',
            'Meeeow!',
            'Mrow.',
            'Hiss!',
            '...',
            'Meow meow.',
            'Prrrrt?',
            'Meeew.'
        ];

        // Function to scroll to the bottom of the chat
        const scrollToBottom = () => {
            chatContainer.scrollTop = chatContainer.scrollHeight;
        };

        // Function to create and append a message
        const appendMessage = (sender, message) => {
            const messageWrapper = document.createElement('div');
            
            const messageContent = `
                <div class="max-w-2xl mx-auto flex items-end gap-3 ${sender === 'user' ? 'flex-row-reverse' : ''}">
                    ${sender === 'cat' ? `
                    <div class="flex-shrink-0">
                        <svg class="h-8 w-8 text-white bg-green-600 p-1 rounded-full" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M11.968 2.073c.183 0 .366.003.548.01a8.998 8.998 0 0 1 8.41 8.41c.007.182.01.365.01.548 0 .183-.003.366-.01.548a8.998 8.998 0 0 1-8.41 8.41c-.182.007-.365.01-.548.01-.183 0-.366-.003-.548-.01a8.998 8.998 0 0 1-8.41-8.41c-.007-.182-.01-.365-.01-.548 0-.183.003-.366.01-.548A8.998 8.998 0 0 1 11.42 2.083c.182-.007.365-.01.548-.01Zm0 1.5a7.5 7.5 0 0 0-7.045 7.045c-.006.152-.009.305-.009.458s.003.306.009.458A7.5 7.5 0 0 0 11.968 19.5c.153 0 .306-.003.458-.009A7.5 7.5 0 0 0 19.5 12.42c.006-.152.009-.305.009-.458s-.003-.306-.009-.458A7.5 7.5 0 0 0 12.425 4.455a7.433 7.433 0 0 0-.457-.009ZM8.5 12c.828 0 1.5-.672 1.5-1.5S9.328 9 8.5 9 7 9.672 7 10.5 7.672 12 8.5 12Zm7 0c.828 0 1.5-.672 1.5-1.5S16.328 9 15.5 9s-1.5.672-1.5 1.5.672 1.5 1.5 1.5Zm-3.499 2.25c-.276 0-.5.224-.5.5s.224.5.5.5h.001a.5.5 0 0 0 .499-.5v-.5h-.5Zm0-1.5c.275 0 .5-.225.5-.5v-1c0-.275-.225-.5-.5-.5s-.5.225-.5.5v1c0 .275.225.5.5.5Zm-1 1.5c-.276 0-.5.224-.5.5s.224.5.5.5h.001a.5.5 0 0 0 .499-.5v-.5h-.5Zm2 0c-.276 0-.5.224-.5.5s.224.5.5.5a.5.5 0 0 0 .5-.5c0-.276-.224-.5-.5-.5Z"/></svg>
                    </div>` : ''}
                    <div class="max-w-xs md:max-w-md rounded-lg p-3 ${sender === 'user' ? 'bg-green-600' : 'bg-gray-700'}">
                        <p class="text-white">${message}</p>
                    </div>
                </div>
            `;
            messageWrapper.innerHTML = messageContent;
            chatContainer.appendChild(messageWrapper);
            scrollToBottom();
        };

        const showTypingIndicator = () => {
            typingIndicatorContainer.classList.remove('hidden');
            scrollToBottom();
        };

        const hideTypingIndicator = () => {
            typingIndicatorContainer.classList.add('hidden');
        };

        const getCatResponse = () => {
            hideTypingIndicator();
            const randomResponse = catResponses[Math.floor(Math.random() * catResponses.length)];
            appendMessage('cat', randomResponse);
            sendButton.disabled = false;
            userInput.disabled = false;
            userInput.focus();
        };

        chatForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const userMessage = userInput.value.trim();

            if (userMessage) {
                appendMessage('user', userMessage);
                userInput.value = '';
                sendButton.disabled = true;
                userInput.disabled = true;
                
                showTypingIndicator();

                // Simulate cat thinking time
                setTimeout(getCatResponse, 1000 + Math.random() * 800);
            }
        });

        // Initial welcome message from CatGPT
        window.addEventListener('load', () => {
            appendMessage('cat', 'Meow?');
        });
    </script>
</body>
</html>
